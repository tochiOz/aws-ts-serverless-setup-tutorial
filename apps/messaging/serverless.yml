service: messaging

frameworkVersion: "3"

provider:
  name: aws
  stage: ${env:STAGE, 'dev'}
  region: ${env:AWS_REGION, 'us-east-1'}
  memorySize: 128
  timeout: 10
  deploymentBucket:
    name: ${self:provider.region}.${env:ACCOUNT_ID}.deploys.${self:service}
  versionFunctions: false
  stackName: "${self:provider.stage}-${self:service}"
  environment:
    STAGE: ${self:provider.stage}
    REGION: ${self:provider.region}
    ACCOUNT_ID: ${env:ACCOUNT_ID}
  stackTags:
    SERVICE: "${self:service}"
    REGION: "${self:provider.region}"

resources:
  Resources:
    OthersSNSTopic:
      Type: AWS::SNS::Topic
      Properties:
        TopicName: ${self:provider.region}.${env:ACCOUNT_ID}.sns.${self:service}

  Outputs:
    OthersSNSTopicArn:
      Description: "ARN of the SNS topic"
      Value:
        Ref: OthersSNSTopic
      Export:
        Name: ${self:provider.region}.${env:ACCOUNT_ID}.sns.${self:service}
